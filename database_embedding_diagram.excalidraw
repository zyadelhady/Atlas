{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "type": "text",
      "id": "main-title",
      "x": 300,
      "y": 20,
      "width": 800,
      "height": 40,
      "fontSize": 32,
      "fontFamily": 1,
      "text": "Atlas Database & Embedding Architecture",
      "textAlign": "center",
      "strokeColor": "#1e88e5",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "ingestion-title",
      "x": 50,
      "y": 80,
      "width": 600,
      "height": 35,
      "fontSize": 26,
      "fontFamily": 1,
      "text": "PART 1: DATA INGESTION PROCESS",
      "textAlign": "left",
      "strokeColor": "#e65100",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "raw-docs",
      "x": 100,
      "y": 140,
      "width": 280,
      "height": 140,
      "strokeColor": "#fb8c00",
      "backgroundColor": "#ffe0b2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "raw-docs-title",
      "x": 120,
      "y": 150,
      "width": 240,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "STEP 1: Raw Documents",
      "textAlign": "center",
      "strokeColor": "#e65100",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "raw-docs-details",
      "x": 120,
      "y": 180,
      "width": 240,
      "height": 90,
      "fontSize": 13,
      "fontFamily": 1,
      "text": "Location: backend/data/*.txt\n\nFiles:\n• 10min.txt\n• dsintro.txt\n• missing_data.txt\n\nFormat: Plain text\nContent: Documentation",
      "textAlign": "left",
      "strokeColor": "#e65100"
    },
    {
      "type": "arrow",
      "id": "arrow1",
      "x": 380,
      "y": 210,
      "width": 60,
      "height": 0,
      "strokeColor": "#1e88e5",
      "strokeWidth": 3,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [[0, 0], [60, 0]]
    },
    {
      "type": "rectangle",
      "id": "loader",
      "x": 460,
      "y": 140,
      "width": 280,
      "height": 140,
      "strokeColor": "#43a047",
      "backgroundColor": "#c8e6c9",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "loader-title",
      "x": 480,
      "y": 150,
      "width": 240,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "STEP 2: Load Documents",
      "textAlign": "center",
      "strokeColor": "#2e7d32",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "loader-details",
      "x": 480,
      "y": 180,
      "width": 240,
      "height": 90,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "DirectoryLoader(\n  'data', glob='*.txt'\n)\n\nReads all .txt files\nCreates Document objects:\n[\n  Document(page_content='...',\n           metadata={'source': '...'})\n]",
      "textAlign": "left",
      "strokeColor": "#2e7d32"
    },
    {
      "type": "arrow",
      "id": "arrow2",
      "x": 740,
      "y": 210,
      "width": 60,
      "height": 0,
      "strokeColor": "#1e88e5",
      "strokeWidth": 3,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [[0, 0], [60, 0]]
    },
    {
      "type": "rectangle",
      "id": "splitter",
      "x": 820,
      "y": 140,
      "width": 320,
      "height": 140,
      "strokeColor": "#7b1fa2",
      "backgroundColor": "#ce93d8",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "splitter-title",
      "x": 840,
      "y": 150,
      "width": 280,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "STEP 3: Chunk Documents",
      "textAlign": "center",
      "strokeColor": "#4a148c",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "splitter-details",
      "x": 840,
      "y": 180,
      "width": 280,
      "height": 90,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "RecursiveCharacterTextSplitter(\n  chunk_size=500,\n  chunk_overlap=50\n)\n\nSplits long docs into chunks:\n• Max 500 chars per chunk\n• 50 char overlap (context)\n• Tries: \\n\\n → \\n → space → char\n\nResult: 100s of small chunks",
      "textAlign": "left",
      "strokeColor": "#4a148c"
    },
    {
      "type": "rectangle",
      "id": "example-chunk",
      "x": 100,
      "y": 320,
      "width": 1040,
      "height": 120,
      "strokeColor": "#7b1fa2",
      "backgroundColor": "#f3e5f5",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "example-title",
      "x": 120,
      "y": 330,
      "width": 1000,
      "height": 25,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "Example: Long Document → Multiple Chunks",
      "textAlign": "center",
      "strokeColor": "#4a148c",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "example-text",
      "x": 120,
      "y": 360,
      "width": 1000,
      "height": 70,
      "fontSize": 11,
      "fontFamily": 1,
      "text": "Original (1500 chars): \"Pandas is a Python library... [long text] ...DataFrames are powerful\"\n\nChunk 1 (500 chars): \"Pandas is a Python library for data analysis...\" (metadata: source='10min.txt', chunk=0)\nChunk 2 (500 chars): \"...data analysis. DataFrames provide...\" (50 char overlap, metadata: chunk=1)\nChunk 3 (500 chars): \"...provide tabular data structures...\" (50 char overlap, metadata: chunk=2)",
      "textAlign": "left",
      "strokeColor": "#4a148c"
    },
    {
      "type": "arrow",
      "id": "arrow3",
      "x": 620,
      "y": 440,
      "width": 0,
      "height": 50,
      "strokeColor": "#1e88e5",
      "strokeWidth": 3,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [[0, 0], [0, 50]]
    },
    {
      "type": "rectangle",
      "id": "embedding-process",
      "x": 300,
      "y": 510,
      "width": 640,
      "height": 180,
      "strokeColor": "#00897b",
      "backgroundColor": "#b2dfdb",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "embedding-title",
      "x": 320,
      "y": 520,
      "width": 600,
      "height": 30,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "STEP 4: Generate Embeddings (Google AI)",
      "textAlign": "center",
      "strokeColor": "#004d40",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "embedding-details",
      "x": 320,
      "y": 555,
      "width": 600,
      "height": 125,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "GoogleGenerativeAIEmbeddings(model='models/embedding-001')\n\nFor each chunk:\n1. Send text to Google Embedding API\n2. Receive 768-dimensional vector\n3. Vector captures semantic meaning\n\nExample:\n  Text: \"DataFrames are tabular data structures\"\n  Vector: [0.023, -0.145, 0.892, ..., 0.234] (768 numbers)\n\nSimilar text = similar vectors (cosine similarity)",
      "textAlign": "left",
      "strokeColor": "#004d40"
    },
    {
      "type": "arrow",
      "id": "arrow4",
      "x": 620,
      "y": 690,
      "width": 0,
      "height": 50,
      "strokeColor": "#1e88e5",
      "strokeWidth": 3,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [[0, 0], [0, 50]]
    },
    {
      "type": "rectangle",
      "id": "storage",
      "x": 300,
      "y": 760,
      "width": 640,
      "height": 140,
      "strokeColor": "#d32f2f",
      "backgroundColor": "#ffcdd2",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "storage-title",
      "x": 320,
      "y": 770,
      "width": 600,
      "height": 30,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "STEP 5: Store in PostgreSQL + pgvector",
      "textAlign": "center",
      "strokeColor": "#b71c1c",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "storage-details",
      "x": 320,
      "y": 805,
      "width": 600,
      "height": 85,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "PGVectorStore.from_documents(\n  documents=texts, embedding=embeddings, table_name='docs'\n)\n\nCreates table 'docs' with columns:\n• content (text) - The chunk text\n• embedding (vector(768)) - The 768-dim vector\n• langchain_id (uuid) - Unique ID\n• langchain_metadata (jsonb) - Source file, chunk number, etc.",
      "textAlign": "left",
      "strokeColor": "#b71c1c"
    },
    {
      "type": "text",
      "id": "db-title",
      "x": 50,
      "y": 950,
      "width": 700,
      "height": 35,
      "fontSize": 26,
      "fontFamily": 1,
      "text": "PART 2: DATABASE SCHEMA",
      "textAlign": "left",
      "strokeColor": "#1e88e5",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "postgres-box",
      "x": 50,
      "y": 1010,
      "width": 1150,
      "height": 60,
      "strokeColor": "#1976d2",
      "backgroundColor": "#bbdefb",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "postgres-text",
      "x": 70,
      "y": 1025,
      "width": 1110,
      "height": 30,
      "fontSize": 22,
      "fontFamily": 1,
      "text": "PostgreSQL Database (with pgvector extension for vector operations)",
      "textAlign": "center",
      "strokeColor": "#0d47a1",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "docs-table",
      "x": 100,
      "y": 1100,
      "width": 480,
      "height": 380,
      "strokeColor": "#00897b",
      "backgroundColor": "#b2dfdb",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "docs-table-title",
      "x": 120,
      "y": 1110,
      "width": 440,
      "height": 30,
      "fontSize": 22,
      "fontFamily": 1,
      "text": "TABLE: docs",
      "textAlign": "center",
      "strokeColor": "#004d40",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "docs-subtitle",
      "x": 120,
      "y": 1145,
      "width": 440,
      "height": 20,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "(Created by LangChain PGVectorStore)",
      "textAlign": "center",
      "strokeColor": "#004d40",
      "fontStyle": "italic"
    },
    {
      "type": "line",
      "id": "line1",
      "x": 120,
      "y": 1175,
      "width": 440,
      "height": 0,
      "strokeColor": "#004d40",
      "strokeWidth": 2,
      "points": [[0, 0], [440, 0]]
    },
    {
      "type": "text",
      "id": "docs-schema",
      "x": 130,
      "y": 1185,
      "width": 430,
      "height": 280,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "COLUMN: content\nType: TEXT\nDescription: The document chunk text\nExample: \"Pandas is a Python library...\"\nIndexed: No (full-text search via to_tsvector)\n\nCOLUMN: embedding\nType: VECTOR(768)\nDescription: 768-dimensional embedding vector\nExample: [0.023, -0.145, 0.892, ...]\nIndexed: Yes (ivfflat/hnsw for fast similarity)\n\nCOLUMN: langchain_id\nType: UUID\nDescription: Unique identifier for each chunk\nExample: \"a1b2c3d4-e5f6-7890-abcd-ef1234567890\"\nIndexed: Yes (primary key)\n\nCOLUMN: langchain_metadata\nType: JSONB\nDescription: Metadata about the chunk\nExample: {\"source\": \"data/10min.txt\", \"chunk\": 0}\nIndexed: No",
      "textAlign": "left",
      "strokeColor": "#004d40"
    },
    {
      "type": "rectangle",
      "id": "chat-history-table",
      "x": 620,
      "y": 1100,
      "width": 480,
      "height": 380,
      "strokeColor": "#fb8c00",
      "backgroundColor": "#ffe0b2",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "chat-table-title",
      "x": 640,
      "y": 1110,
      "width": 440,
      "height": 30,
      "fontSize": 22,
      "fontFamily": 1,
      "text": "TABLE: chat_history",
      "textAlign": "center",
      "strokeColor": "#e65100",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "chat-subtitle",
      "x": 640,
      "y": 1145,
      "width": 440,
      "height": 20,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "(Created by SQLAlchemy ORM)",
      "textAlign": "center",
      "strokeColor": "#e65100",
      "fontStyle": "italic"
    },
    {
      "type": "line",
      "id": "line2",
      "x": 640,
      "y": 1175,
      "width": 440,
      "height": 0,
      "strokeColor": "#e65100",
      "strokeWidth": 2,
      "points": [[0, 0], [440, 0]]
    },
    {
      "type": "text",
      "id": "chat-schema",
      "x": 650,
      "y": 1185,
      "width": 430,
      "height": 280,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "COLUMN: id\nType: SERIAL (auto-increment integer)\nDescription: Primary key\nExample: 1, 2, 3, ...\nIndexed: Yes (primary key)\n\nCOLUMN: session_id\nType: VARCHAR\nDescription: User session identifier (UUID)\nExample: \"abc-123-def-456\"\nIndexed: Yes (for fast history lookup)\n\nCOLUMN: prompt\nType: TEXT\nDescription: User's question\nExample: \"How do I merge DataFrames?\"\nIndexed: No\n\nCOLUMN: response\nType: TEXT\nDescription: AI's complete answer\nExample: \"To merge DataFrames...\"\nIndexed: No\n\nCOLUMN: timestamp\nType: TIMESTAMP\nDescription: When message was sent\nExample: \"2025-10-18 14:30:22\"\nIndexed: No",
      "textAlign": "left",
      "strokeColor": "#e65100"
    },
    {
      "type": "text",
      "id": "retrieval-title",
      "x": 50,
      "y": 1520,
      "width": 800,
      "height": 35,
      "fontSize": 26,
      "fontFamily": 1,
      "text": "PART 3: HOW RETRIEVAL WORKS",
      "textAlign": "left",
      "strokeColor": "#7b1fa2",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "query-embedding",
      "x": 100,
      "y": 1580,
      "width": 380,
      "height": 140,
      "strokeColor": "#7b1fa2",
      "backgroundColor": "#ce93d8",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "query-title",
      "x": 120,
      "y": 1590,
      "width": 340,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "User Query → Embedding",
      "textAlign": "center",
      "strokeColor": "#4a148c",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "query-details",
      "x": 120,
      "y": 1620,
      "width": 340,
      "height": 90,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "User asks:\n\"How to merge DataFrames?\"\n\nConvert to embedding:\nquery_vector = embeddings.embed(\n  \"merge join concatenate DataFrames\"\n)\n\nResult: [0.156, -0.234, 0.567, ...]\n(768 numbers)",
      "textAlign": "left",
      "strokeColor": "#4a148c"
    },
    {
      "type": "arrow",
      "id": "arrow5",
      "x": 480,
      "y": 1650,
      "width": 80,
      "height": 0,
      "strokeColor": "#1e88e5",
      "strokeWidth": 3,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "points": [[0, 0], [80, 0]]
    },
    {
      "type": "rectangle",
      "id": "similarity-search",
      "x": 580,
      "y": 1580,
      "width": 520,
      "height": 140,
      "strokeColor": "#43a047",
      "backgroundColor": "#c8e6c9",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "similarity-title",
      "x": 600,
      "y": 1590,
      "width": 480,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "Vector Similarity Search (Semantic)",
      "textAlign": "center",
      "strokeColor": "#2e7d32",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "similarity-details",
      "x": 600,
      "y": 1620,
      "width": 480,
      "height": 90,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "SELECT content, embedding,\n       1 - (embedding <=> query_vector) AS similarity\nFROM docs\nORDER BY embedding <=> query_vector\nLIMIT 10;\n\n<=> is cosine distance operator (pgvector)\nReturns 10 most similar chunks with scores\nFast! Uses HNSW/IVFFlat index",
      "textAlign": "left",
      "strokeColor": "#2e7d32"
    },
    {
      "type": "rectangle",
      "id": "keyword-search-box",
      "x": 100,
      "y": 1760,
      "width": 480,
      "height": 140,
      "strokeColor": "#fb8c00",
      "backgroundColor": "#ffe0b2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "keyword-title",
      "x": 120,
      "y": 1770,
      "width": 440,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "Full-Text Search (Keyword)",
      "textAlign": "center",
      "strokeColor": "#e65100",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "keyword-details",
      "x": 120,
      "y": 1800,
      "width": 440,
      "height": 90,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "SELECT content, langchain_metadata\nFROM docs\nWHERE to_tsvector('english', content)\n      @@ plainto_tsquery('english', :query)\nLIMIT 5;\n\nMatches exact tokens (stemmed)\nFast! Uses GIN index\nCatches technical terms semantic search misses",
      "textAlign": "left",
      "strokeColor": "#e65100"
    },
    {
      "type": "rectangle",
      "id": "results-box",
      "x": 620,
      "y": 1760,
      "width": 480,
      "height": 140,
      "strokeColor": "#d32f2f",
      "backgroundColor": "#ffcdd2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "results-title",
      "x": 640,
      "y": 1770,
      "width": 440,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "Combined Results",
      "textAlign": "center",
      "strokeColor": "#b71c1c",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "results-details",
      "x": 640,
      "y": 1800,
      "width": 440,
      "height": 90,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "Merge + Deduplicate:\n• Semantic results (filtered ≥0.7)\n• Keyword results (score 0.5)\n• Remove duplicates\n• Sort by score\n\nReturn to LLM as context:\n\"Here's relevant documentation...\"\n[Top chunks used for answer]",
      "textAlign": "left",
      "strokeColor": "#b71c1c"
    },
    {
      "type": "text",
      "id": "performance-title",
      "x": 50,
      "y": 1950,
      "width": 800,
      "height": 35,
      "fontSize": 26,
      "fontFamily": 1,
      "text": "PART 4: PERFORMANCE & INDEXING",
      "textAlign": "left",
      "strokeColor": "#1976d2",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "indexes",
      "x": 100,
      "y": 2010,
      "width": 1000,
      "height": 200,
      "strokeColor": "#1976d2",
      "backgroundColor": "#bbdefb",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "indexes-title",
      "x": 120,
      "y": 2020,
      "width": 960,
      "height": 30,
      "fontSize": 20,
      "fontFamily": 1,
      "text": "Database Indexes (for fast queries)",
      "textAlign": "center",
      "strokeColor": "#0d47a1",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "indexes-details",
      "x": 120,
      "y": 2055,
      "width": 960,
      "height": 145,
      "fontSize": 13,
      "fontFamily": 1,
      "text": "1. Vector Index (docs.embedding)\n   Type: HNSW (Hierarchical Navigable Small World) or IVFFlat\n   Purpose: Fast approximate nearest neighbor search\n   Speed: O(log n) instead of O(n) for 1M+ vectors\n\n2. Full-Text Index (docs.content)\n   Type: GIN (Generalized Inverted Index) on to_tsvector(content)\n   Purpose: Fast keyword matching\n   Speed: O(log n) for text search\n\n3. Session Index (chat_history.session_id)\n   Type: B-tree\n   Purpose: Fast history lookup by session\n   Speed: O(log n) for history retrieval",
      "textAlign": "left",
      "strokeColor": "#0d47a1"
    },
    {
      "type": "rectangle",
      "id": "stats",
      "x": 100,
      "y": 2240,
      "width": 1000,
      "height": 140,
      "strokeColor": "#00897b",
      "backgroundColor": "#b2dfdb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "stats-title",
      "x": 120,
      "y": 2250,
      "width": 960,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "Typical Data Size",
      "textAlign": "center",
      "strokeColor": "#004d40",
      "fontWeight": "bold"
    },
    {
      "type": "text",
      "id": "stats-details",
      "x": 120,
      "y": 2280,
      "width": 960,
      "height": 90,
      "fontSize": 13,
      "fontFamily": 1,
      "text": "• docs table: 100-10,000 rows (depends on documentation size)\n  - Each row ~3-5 KB (text + vector + metadata)\n  - 1,000 chunks ≈ 4 MB\n  - 10,000 chunks ≈ 40 MB\n\n• chat_history table: Grows with usage\n  - Each row ~1-2 KB\n  - 1,000 messages ≈ 1.5 MB",
      "textAlign": "left",
      "strokeColor": "#004d40"
    },
    {
      "type": "text",
      "id": "summary-title",
      "x": 50,
      "y": 2420,
      "width": 1100,
      "height": 35,
      "fontSize": 28,
      "fontFamily": 1,
      "text": "SUMMARY: Complete Data Flow",
      "textAlign": "center",
      "strokeColor": "#1e88e5",
      "fontWeight": "bold"
    },
    {
      "type": "rectangle",
      "id": "summary",
      "x": 100,
      "y": 2480,
      "width": 1000,
      "height": 160,
      "strokeColor": "#1e88e5",
      "backgroundColor": "#e3f2fd",
      "fillStyle": "solid",
      "strokeWidth": 3,
      "roundness": { "type": 3 }
    },
    {
      "type": "text",
      "id": "summary-text",
      "x": 120,
      "y": 2490,
      "width": 960,
      "height": 140,
      "fontSize": 13,
      "fontFamily": 1,
      "text": "INGESTION (One-time):\nRaw Docs (.txt) → Load → Chunk (500 chars) → Embed (768-dim vectors) → Store in PostgreSQL\n\nRETRIEVAL (Every query):\nUser Query → Preprocess → Embed → Search Database (semantic + keyword) → Return Top Chunks\n\nDATABASE:\n• docs table: Stores chunks + embeddings (vector search)\n• chat_history table: Stores conversations (context memory)\n• Indexes: HNSW/IVFFlat (vectors), GIN (full-text), B-tree (sessions)\n\nRESULT: Fast, accurate retrieval in ~100-300ms even with 10,000+ document chunks!",
      "textAlign": "left",
      "strokeColor": "#0d47a1"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
